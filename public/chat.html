<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XO CHAT</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            darkPurple: '#1e1b2e',
            panelPurple: '#2a213d',
            chatPurple: '#3b2e5a',
            inputPurple: '#4a3b69',
          }
        }
      }
    }
  </script>
</head>
<body class="bg-darkPurple text-white">

  <div class="max-w-5xl mx-auto mt-6 p-4 sm:p-6 bg-panelPurple rounded-xl shadow-md border border-purple-700 relative">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-purple-400">ðŸ’¬ Xo Chat</h2>

      <!-- Toggle Button -->
      <div class="sm:hidden">
        <button id="toggleUserList" class="text-white text-2xl focus:outline-none">
          â‹®
        </button>
      </div>

      <button id="logoutBtn" class="hidden sm:block bg-red-600 hover:bg-red-700 text-white px-4 py-1 rounded">
        Logout
      </button>
    </div>

    <div class="flex flex-col sm:flex-row gap-4">
      <!-- Chat Area -->
      <div class="w-full sm:w-3/4 flex flex-col">
        <div id="chatBox" class="border border-purple-600 p-3 h-[400px] overflow-y-auto rounded mb-2 bg-chatPurple text-sm"></div>
        <div class="flex">
          <input id="messageInput" type="text" placeholder="Tulis pesan..."
            class="flex-grow p-2 bg-inputPurple border border-purple-500 text-white placeholder-purple-300 rounded-l focus:outline-none focus:ring-2 focus:ring-purple-500">
          <button id="sendBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 rounded-r">
            Kirim
          </button>
        </div>
      </div>

      <!-- User List Sidebar -->
      <div id="userSidebar"
        class="hidden sm:block w-full sm:w-1/4 bg-chatPurple p-3 rounded border border-purple-500 max-h-[400px] overflow-y-auto transition-all">
        <h3 class="font-semibold mb-2 text-purple-300">ðŸŸ¢ Pengguna Online</h3>
        <div id="userList" class="text-sm space-y-2"></div>
      </div>
    </div>

    <!-- Mobile Sidebar (Drawer) -->
    <div id="mobileUserDrawer"
      class="fixed top-0 right-0 h-full w-64 bg-chatPurple shadow-lg border-l border-purple-700 transform translate-x-full transition-transform duration-300 z-50 sm:hidden">
      <div class="p-4 flex justify-between items-center border-b border-purple-700">
        <h3 class="font-semibold text-purple-300">ðŸŸ¢ Pengguna Online</h3>
        <button id="closeDrawer" class="text-white text-xl">&times;</button>
      </div>
      <div id="userListMobile" class="p-4 text-sm space-y-2 overflow-y-auto h-[calc(100%-60px)]"></div>
    </div>
  </div>

  <script type="module" src="./firebase-config.js"></script>
  <script type="module" src="./chat.js"></script>

  <script>
    // Toggle drawer
    const toggleBtn = document.getElementById('toggleUserList');
    const drawer = document.getElementById('mobileUserDrawer');
    const closeDrawer = document.getElementById('closeDrawer');

    toggleBtn?.addEventListener('click', () => {
      drawer.classList.remove('translate-x-full');
    });

    closeDrawer?.addEventListener('click', () => {
      drawer.classList.add('translate-x-full');
    });
  </script>
</body>
</html>
